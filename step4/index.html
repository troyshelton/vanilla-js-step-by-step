<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 4: Prototype vs ES6 Classes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .step-banner {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .prototype-panel {
            border-left: 4px solid #dc3545;
        }

        .es6-panel {
            border-left: 4px solid #28a745;
        }

        button {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            color: white;
        }

        .prototype-btn {
            background: #dc3545;
        }

        .es6-btn {
            background: #28a745;
        }

        .compare-btn {
            background: #007bff;
        }

        .output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 250px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="step-banner">
        <h1>‚öñÔ∏è Step 4: Prototype vs ES6 Classes Comparison</h1>
        <p><strong>Learning Goal:</strong> Understand that both patterns create identical functionality</p>
        <p>üéØ See the syntax differences but same underlying behavior and performance</p>
    </div>

    <div class="highlight">
        <strong>üß™ Key Insight:</strong> ES6 classes are "syntactic sugar" over prototypes. Both create the exact same prototype structure and have identical performance. The choice is about syntax preference and browser compatibility!
    </div>

    <div class="comparison">
        <div class="panel prototype-panel">
            <h2>üî¥ Prototype Pattern (Pre-ES6)</h2>
            <p><strong>File:</strong> ContactService.js</p>
            <p><strong>Browser Support:</strong> All browsers (2009+)</p>
            <p><strong>Global Name:</strong> ContactService</p>

            <button class="prototype-btn" onclick="testPrototype()">Test Prototype Version</button>
            <button class="prototype-btn" onclick="showPrototypeCode()">Show Code Structure</button>
            <div id="prototype-output" class="output">Click "Test Prototype Version" to try it</div>
        </div>

        <div class="panel es6-panel">
            <h2>üü¢ ES6 Classes (Modern)</h2>
            <p><strong>File:</strong> ContactService-ES6.js</p>
            <p><strong>Browser Support:</strong> Modern browsers (2016+)</p>
            <p><strong>Global Name:</strong> ContactServiceES6</p>

            <button class="es6-btn" onclick="testES6()">Test ES6 Version</button>
            <button class="es6-btn" onclick="showES6Code()">Show Code Structure</button>
            <div id="es6-output" class="output">Click "Test ES6 Version" to try it</div>
        </div>
    </div>

    <div class="panel">
        <h2>üìä Direct Comparison</h2>
        <button class="compare-btn" onclick="comparePerformance()">Compare Performance</button>
        <button class="compare-btn" onclick="compareMemory()">Compare Memory</button>
        <button class="compare-btn" onclick="compareSyntax()">Compare Syntax</button>
        <div id="comparison-output" class="output">Click buttons above to compare both approaches</div>
    </div>

    <!-- Load both versions -->
    <script src="ContactService.js"></script>
    <script src="ContactService-ES6.js"></script>

    <script>
        function testPrototype() {
            const output = document.getElementById('prototype-output');

            const service = new ContactService();
            service.addContact('Alice Brown', '555-0001', 'alice@email.com');
            service.addContact('Bob Smith', '555-0002', 'bob@email.com');

            const found = service.findContact('alice');

            output.textContent = `‚úÖ Prototype Pattern Test:\n\n`;
            output.textContent += `Added 2 contacts\n`;
            output.textContent += `Search for "alice": ${found ? found.name : 'Not found'}\n`;
            output.textContent += `Total contacts: ${service.getContactCount()}\n\n`;
            output.textContent += `üîç Check console to see how it works!`;
        }

        function testES6() {
            const output = document.getElementById('es6-output');

            const service = new ContactServiceES6();
            service.addContact('Alice Brown', '555-0001', 'alice@email.com');
            service.addContact('Bob Smith', '555-0002', 'bob@email.com');

            const found = service.findContact('alice');

            output.textContent = `‚úÖ ES6 Class Test:\n\n`;
            output.textContent += `Added 2 contacts\n`;
            output.textContent += `Search for "alice": ${found ? found.name : 'Not found'}\n`;
            output.textContent += `Total contacts: ${service.getContactCount()}\n\n`;
            output.textContent += `üîç Identical behavior to prototype version!`;
        }

        function comparePerformance() {
            const output = document.getElementById('comparison-output');

            // Test prototype version
            const protoStart = performance.now();
            for (let i = 0; i < 1000; i++) {
                const service = new ContactService();
                service.addContact(`Person${i}`, '555-0000', 'test@email.com');
            }
            const protoEnd = performance.now();

            // Test ES6 version
            const es6Start = performance.now();
            for (let i = 0; i < 1000; i++) {
                const service = new ContactServiceES6();
                service.addContact(`Person${i}`, '555-0000', 'test@email.com');
            }
            const es6End = performance.now();

            output.textContent = `‚è±Ô∏è Performance Comparison (1000 instances):\n\n`;
            output.textContent += `üî¥ Prototype: ${(protoEnd - protoStart).toFixed(2)}ms\n`;
            output.textContent += `üü¢ ES6 Classes: ${(es6End - es6Start).toFixed(2)}ms\n\n`;
            output.textContent += `üìä Result: Nearly identical performance!\n`;
            output.textContent += `üí° Why? ES6 classes use prototypes internally.`;
        }

        function compareMemory() {
            const output = document.getElementById('comparison-output');

            const proto1 = new ContactService();
            const proto2 = new ContactService();
            const es6_1 = new ContactServiceES6();
            const es6_2 = new ContactServiceES6();

            output.textContent = `üíæ Memory Sharing Test:\n\n`;
            output.textContent += `üî¥ Prototype methods shared: ${proto1.addContact === proto2.addContact}\n`;
            output.textContent += `üü¢ ES6 methods shared: ${es6_1.addContact === es6_2.addContact}\n\n`;
            output.textContent += `‚úÖ Both patterns share methods (memory efficient!)\n\n`;
            output.textContent += `üîç This proves:\n`;
            output.textContent += `‚Ä¢ Both use prototype for method storage\n`;
            output.textContent += `‚Ä¢ ES6 classes = syntactic sugar over prototypes\n`;
            output.textContent += `‚Ä¢ Same memory efficiency in both approaches`;
        }

        function compareSyntax() {
            const output = document.getElementById('comparison-output');

            output.textContent = `üìù Syntax Comparison:\n\n`;
            output.textContent += `üî¥ PROTOTYPE PATTERN:\n`;
            output.textContent += `function ContactService() {\n`;
            output.textContent += `    this.contacts = [];\n`;
            output.textContent += `}\n`;
            output.textContent += `ContactService.prototype.addContact = function(name) {\n`;
            output.textContent += `    // Method code\n`;
            output.textContent += `};\n\n`;

            output.textContent += `üü¢ ES6 CLASS PATTERN:\n`;
            output.textContent += `class ContactService {\n`;
            output.textContent += `    constructor() {\n`;
            output.textContent += `        this.contacts = [];\n`;
            output.textContent += `    }\n`;
            output.textContent += `    addContact(name) {\n`;
            output.textContent += `        // Same method code\n`;
            output.textContent += `    }\n`;
            output.textContent += `}\n\n`;

            output.textContent += `üí° Both create identical prototype structures!`;
        }

        function showPrototypeCode() {
            const output = document.getElementById('prototype-output');

            output.textContent = `üî¥ Prototype Pattern Structure:\n\n`;
            output.textContent += `// Constructor function\n`;
            output.textContent += `function ContactService() {\n`;
            output.textContent += `    this.contacts = [];  // Instance data\n`;
            output.textContent += `}\n\n`;
            output.textContent += `// Methods added to prototype (manual)\n`;
            output.textContent += `ContactService.prototype.addContact = function() {...}\n`;
            output.textContent += `ContactService.prototype.findContact = function() {...}\n\n`;
            output.textContent += `‚úÖ Methods are shared across all instances\n`;
            output.textContent += `‚úÖ Works in all browsers (maximum compatibility)`;
        }

        function showES6Code() {
            const output = document.getElementById('es6-output');

            output.textContent = `üü¢ ES6 Class Structure:\n\n`;
            output.textContent += `class ContactService {\n`;
            output.textContent += `    constructor() {\n`;
            output.textContent += `        this.contacts = [];  // Instance data\n`;
            output.textContent += `    }\n\n`;
            output.textContent += `    addContact() {...}  // Auto to prototype\n`;
            output.textContent += `    findContact() {...} // Auto to prototype\n`;
            output.textContent += `}\n\n`;
            output.textContent += `‚úÖ Methods automatically go to prototype\n`;
            output.textContent += `‚úÖ Cleaner syntax, same functionality`;
        }
    </script>
</body>
</html>